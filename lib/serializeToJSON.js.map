{"version":3,"sources":["../src/serializeToJSON.js"],"names":["serializeToJSON","serializeAST","context","operations","fragments","typesUsed","map","serializeType","ast","space","key","value","expandTypes","String","type","serializeEnumType","serializeInputObjectType","serializeScalarType","name","description","values","getValues","kind","fields","getFields"],"mappings":";;;;;;;;;;;;;;kBAOwBA,e;QAQRC,Y,GAAAA,Y;;AAfhB;;;;AAOe,SAASD,eAAT,CAAyBE,OAAzB,EAAkC;AAC/C,SAAOD,aAAa;AAClBE,gBAAY,sBAAcD,QAAQC,UAAtB,CADM;AAElBC,eAAW,sBAAcF,QAAQE,SAAtB,CAFO;AAGlBC,eAAWH,QAAQG,SAAR,CAAkBC,GAAlB,CAAsBC,aAAtB;AAHO,GAAb,EAIJ,IAJI,CAAP;AAKD;;AAEM,SAASN,YAAT,CAAsBO,GAAtB,EAA2BC,KAA3B,EAAkC;AACvC,SAAO,yBAAeD,GAAf,EAAoB,UAASE,GAAT,EAAcC,KAAd,EAAqB;AAC9C,QAAI,qBAAOA,KAAP,CAAJ,EAAmB;AACjB,UAAIC,WAAJ,EAAiB;AACf,eAAOL,cAAcI,KAAd,CAAP;AACD,OAFD,MAEO;AACL,eAAOE,OAAOF,KAAP,CAAP;AACD;AACF,KAND,MAMO;AACL,aAAOA,KAAP;AACD;AACF,GAVM,EAUJF,KAVI,CAAP;AAWD;;AAED,SAASF,aAAT,CAAuBO,IAAvB,EAA6B;AAC3B,MAAIA,wCAAJ,EAAqC;AACnC,WAAOC,kBAAkBD,IAAlB,CAAP;AACD,GAFD,MAEO,IAAIA,+CAAJ,EAA4C;AACjD,WAAOE,yBAAyBF,IAAzB,CAAP;AACD,GAFM,MAEA,IAAIA,0CAAJ,EAAuC;AAC5C,WAAOG,oBAAoBH,IAApB,CAAP;AACD;AACF;;AAED,SAASC,iBAAT,CAA2BD,IAA3B,EAAiC;AAAA,QACvBI,IADuB,GACDJ,IADC,CACvBI,IADuB;AAAA,QACjBC,WADiB,GACDL,IADC,CACjBK,WADiB;;AAE/B,QAAMC,SAASN,KAAKO,SAAL,EAAf;;AAEA,SAAO;AACLC,UAAM,UADD;AAELJ,cAFK;AAGLC,4BAHK;AAILC,YAAQA,OAAOd,GAAP,CAAWK,UACjB,EAAEO,MAAMP,MAAMO,IAAd,EAAoBC,aAAaR,MAAMQ,WAAvC,EADiB,CAAX;AAJH,GAAP;AAQD;;AAED,SAASH,wBAAT,CAAkCF,IAAlC,EAAwC;AAAA,QAC9BI,IAD8B,GACRJ,IADQ,CAC9BI,IAD8B;AAAA,QACxBC,WADwB,GACRL,IADQ,CACxBK,WADwB;;AAEtC,QAAMI,SAAS,sBAAcT,KAAKU,SAAL,EAAd,CAAf;;AAEA,SAAO;AACLF,UAAM,iBADD;AAELJ,cAFK;AAGLC,4BAHK;AAILI;AAJK,GAAP;AAMD;;AAED,SAASN,mBAAT,CAA6BH,IAA7B,EAAmC;AAAA,QACzBI,IADyB,GACHJ,IADG,CACzBI,IADyB;AAAA,QACnBC,WADmB,GACHL,IADG,CACnBK,WADmB;;;AAGjC,SAAO;AACLG,UAAM,YADD;AAELJ,cAFK;AAGLC;AAHK,GAAP;AAKD","file":"serializeToJSON.js","sourcesContent":["import {\r\n  isType,\r\n  GraphQLScalarType,\r\n  GraphQLEnumType,\r\n  GraphQLInputObjectType,\r\n} from 'graphql';\r\n\r\nexport default function serializeToJSON(context) {\r\n  return serializeAST({\r\n    operations: Object.values(context.operations),\r\n    fragments: Object.values(context.fragments),\r\n    typesUsed: context.typesUsed.map(serializeType),\r\n  }, '\\t');\r\n}\r\n\r\nexport function serializeAST(ast, space) {\r\n  return JSON.stringify(ast, function(key, value) {\r\n    if (isType(value)) {\r\n      if (expandTypes) {\r\n        return serializeType(value);\r\n      } else {\r\n        return String(value);\r\n      }\r\n    } else {\r\n      return value;\r\n    }\r\n  }, space);\r\n}\r\n\r\nfunction serializeType(type) {\r\n  if (type instanceof GraphQLEnumType) {\r\n    return serializeEnumType(type);\r\n  } else if (type instanceof GraphQLInputObjectType) {\r\n    return serializeInputObjectType(type);\r\n  } else if (type instanceof GraphQLScalarType) {\r\n    return serializeScalarType(type);\r\n  }\r\n}\r\n\r\nfunction serializeEnumType(type) {\r\n  const { name, description } = type;\r\n  const values = type.getValues();\r\n\r\n  return {\r\n    kind: 'EnumType',\r\n    name,\r\n    description,\r\n    values: values.map(value => (\r\n      { name: value.name, description: value.description }\r\n    ))\r\n  }\r\n}\r\n\r\nfunction serializeInputObjectType(type) {\r\n  const { name, description } = type;\r\n  const fields = Object.values(type.getFields());\r\n\r\n  return {\r\n    kind: 'InputObjectType',\r\n    name,\r\n    description,\r\n    fields\r\n  }\r\n}\r\n\r\nfunction serializeScalarType(type) {\r\n  const { name, description } = type;\r\n\r\n  return {\r\n    kind: 'ScalarType',\r\n    name,\r\n    description\r\n  }\r\n}\r\n"]}