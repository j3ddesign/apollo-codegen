{"version":3,"sources":["../src/errors.js"],"names":["ToolError","logError","logErrorMessage","message","prototype","Error","constructor","value","name","isRunningFromXcodeScript","process","env","XCODE_VERSION_ACTUAL","error","fileName","source","locations","location","line","console","log","stack","lineNumber"],"mappings":";;;;;;;;;;QAKgBA,S,GAAAA,S;QAWAC,Q,GAAAA,Q;QAiBAC,e,GAAAA,e;;AAjChB;;;;AAEA;AACA;;AAEO,SAASF,SAAT,CAAmBG,OAAnB,EAA4B;AACjC,OAAKA,OAAL,GAAeA,OAAf;AACD;;AAEDH,UAAUI,SAAV,GAAsB,sBAAcC,MAAMD,SAApB,EAA+B;AACnDE,eAAa,EAAEC,OAAOP,SAAT,EADsC;AAEnDQ,QAAM,EAAED,OAAO,WAAT;AAF6C,CAA/B,CAAtB;;AAKA,MAAME,2BAA2BC,QAAQC,GAAR,CAAYC,oBAA7C;;AAEO,SAASX,QAAT,CAAkBY,KAAlB,EAAyB;AAC9B,MAAIA,iBAAiBb,SAArB,EAAgC;AAC9BE,oBAAgBW,MAAMV,OAAtB;AACD,GAFD,MAEO,IAAIU,sCAAJ,EAAmC;AACxC,UAAMC,WAAWD,MAAME,MAAN,IAAgBF,MAAME,MAAN,CAAaP,IAA9C;AACA,QAAIK,MAAMG,SAAV,EAAqB;AACnB,WAAK,MAAMC,QAAX,IAAuBJ,MAAMG,SAA7B,EAAwC;AACtCd,wBAAgBW,MAAMV,OAAtB,EAA+BW,QAA/B,EAAyCG,SAASC,IAAlD;AACD;AACF,KAJD,MAIO;AACLhB,sBAAgBW,MAAMV,OAAtB,EAA+BW,QAA/B;AACD;AACF,GATM,MASA;AACLK,YAAQC,GAAR,CAAYP,MAAMQ,KAAlB;AACD;AACF;;AAEM,SAASnB,eAAT,CAAyBC,OAAzB,EAAkCW,QAAlC,EAA4CQ,UAA5C,EAAwD;AAC7D,MAAIb,wBAAJ,EAA8B;AAC5B,QAAIK,YAAYQ,UAAhB,EAA4B;AAC1B;AACA;AACAH,cAAQC,GAAR,CAAa,GAAEN,QAAS,IAAGQ,UAAW,YAAWnB,OAAQ,EAAzD;AACD,KAJD,MAIO;AACL;AACAgB,cAAQC,GAAR,CAAa,UAASjB,OAAQ,EAA9B;AACD;AACF,GATD,MASO;AACLgB,YAAQC,GAAR,CAAYjB,OAAZ;AACD;AACF","file":"errors.js","sourcesContent":["import { GraphQLError } from 'graphql';\r\n\r\n// ToolError is used for errors that are part of the expected flow\r\n// and for which a stack trace should not be printed\r\n\r\nexport function ToolError(message) {\r\n  this.message = message;\r\n}\r\n\r\nToolError.prototype = Object.create(Error.prototype, {\r\n  constructor: { value: ToolError },\r\n  name: { value: 'ToolError' }\r\n});\r\n\r\nconst isRunningFromXcodeScript = process.env.XCODE_VERSION_ACTUAL;\r\n\r\nexport function logError(error) {\r\n  if (error instanceof ToolError) {\r\n    logErrorMessage(error.message);\r\n  } else if (error instanceof GraphQLError) {\r\n    const fileName = error.source && error.source.name;\r\n    if (error.locations) {\r\n      for (const location of error.locations) {\r\n        logErrorMessage(error.message, fileName, location.line);\r\n      }\r\n    } else {\r\n      logErrorMessage(error.message, fileName);\r\n    }\r\n  } else {\r\n    console.log(error.stack);\r\n  }\r\n}\r\n\r\nexport function logErrorMessage(message, fileName, lineNumber) {\r\n  if (isRunningFromXcodeScript) {\r\n    if (fileName && lineNumber) {\r\n      // Prefixing error output with file name, line and 'error: ',\r\n      // so Xcode will associate it with the right file and display the error inline\r\n      console.log(`${fileName}:${lineNumber}: error: ${message}`);\r\n    } else {\r\n      // Prefixing error output with 'error: ', so Xcode will display it as an error\r\n      console.log(`error: ${message}`);\r\n    }\r\n  } else {\r\n    console.log(message);\r\n  }\r\n}\r\n"]}